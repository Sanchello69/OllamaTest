# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–æ–≤ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

## –û–±–∑–æ—Ä –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

–°–∏—Å—Ç–µ–º–∞ RAG —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

1. **–•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤** - –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
2. **–í—ã–≤–æ–¥ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤** - –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è —Å–ø–∏—Å–∫–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç** - —Ä–µ–∂–∏–º –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

## –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### ConversationHistory.kt

–ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–∞ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—É–Ω–¥–æ–≤ –¥–∏–∞–ª–æ–≥–∞ (–≤–æ–ø—Ä–æ—Å + –æ—Ç–≤–µ—Ç + –∏—Å—Ç–æ—á–Ω–∏–∫–∏)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –≤ JSON
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–ª—è –≤—ã–≤–æ–¥–∞

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π OpenRouterClient

–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `askQuestionWithHistory()` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ö–æ–º–∞–Ω–¥–∞ `ask` —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏—Å—Ç–æ—Ä–∏–∏

```bash
# –ü—Ä–æ—Å—Ç–æ–π –≤–æ–ø—Ä–æ—Å —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏—Å—Ç–æ—Ä–∏–∏
./gradlew run --args='ask "–ö–∞–∫ –∑–≤–∞–ª–∏ —Å—Ç–µ–ø–Ω–æ–≥–æ –≤–æ–ª–∫–∞?" --save-history'

# –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ
./gradlew run --args='ask "–ê –≥–¥–µ –æ–Ω –∂–∏–ª?" --save-history'

# –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—É—Ç—å –∫ –∏—Å—Ç–æ—Ä–∏–∏
./gradlew run --args='ask "–í–æ–ø—Ä–æ—Å?" --save-history --history-path=my_history.json'

# –° —Ñ–∏–ª—å—Ç—Ä–æ–º —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
./gradlew run --args='ask "–î–µ—Ç–∞–ª–∏ —Å—é–∂–µ—Ç–∞?" --save-history --min-score=0.7'
```

### 2. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç (–∫–æ–º–∞–Ω–¥–∞ `chat`)

```bash
# –ó–∞–ø—É—Å–∫ —á–∞—Ç–∞ —Å RAG
./gradlew run --args='chat'

# –ó–∞–ø—É—Å–∫ –±–µ–∑ RAG
./gradlew run --args='chat --no-rag'

# –° –∫–∞—Å—Ç–æ–º–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º –∏ —Ñ–∏–ª—å—Ç—Ä–æ–º
./gradlew run --args='chat my_index.json --min-score=0.7'

# –° –∫–∞—Å—Ç–æ–º–Ω—ã–º –ø—É—Ç–µ–º –∫ –∏—Å—Ç–æ—Ä–∏–∏
./gradlew run --args='chat --history-path=session1.json'
```

#### –ö–æ–º–∞–Ω–¥—ã –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ:

- –ü—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å - –ø–æ–ª—É—á–∏—Ç–µ –æ—Ç–≤–µ—Ç
- `/history` - –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞
- `/stats` - –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAG)
- `/clear` - –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
- `/exit` –∏–ª–∏ `/quit` - –≤—ã—Ö–æ–¥ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏—Å—Ç–æ—Ä–∏–∏

### –ü—Ä–∏–º–µ—Ä —Å–µ—Å—Å–∏–∏ —á–∞—Ç–∞

```
üí¨ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç —Å RAG
üìù –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤: conversation_history.json

–ö–æ–º–∞–Ω–¥—ã:
  - –í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
  - /history - –ø–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞
  - /stats - –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
  - /clear - –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
  - /exit –∏–ª–∏ /quit - –≤—ã—Ö–æ–¥

–í—ã: –ö–∞–∫ –∑–≤–∞–ª–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è?
...
üí¨ Answer:
–ì–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è –∑–≤–∞–ª–∏ –ì–∞—Ä—Ä–∏ –ì–∞–ª–ª–µ—Ä, —Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–∞–∫ –°—Ç–µ–ø–Ω–æ–π –í–æ–ª–∫.

üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏:

1. [–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: 0.8523]
   –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: chunk_index=42, start_pos=15234, end_pos=17123
   –¢–µ–∫—Å—Ç: –ì–∞—Ä—Ä–∏ –ì–∞–ª–ª–µ—Ä, –∫–æ—Ç–æ—Ä–æ–≥–æ –¥—Ä—É–∑—å—è –Ω–∞–∑—ã–≤–∞–ª–∏ –°—Ç–µ–ø–Ω—ã–º –í–æ–ª–∫–æ–º...

–í—ã: –ê —Å–∫–æ–ª—å–∫–æ –µ–º—É –±—ã–ª–æ –ª–µ—Ç?
...
üí¨ Answer:
–ï–º—É –±—ã–ª–æ –æ–∫–æ–ª–æ 50 –ª–µ—Ç.

üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏:

1. [–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: 0.7891]
   –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: chunk_index=45, start_pos=17500, end_pos=18234
   –¢–µ–∫—Å—Ç: –ì–∞–ª–ª–µ—Ä—É –±—ã–ª–æ –æ–∫–æ–ª–æ –ø—è—Ç–∏–¥–µ—Å—è—Ç–∏ –ª–µ—Ç...

–í—ã: /stats

–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞:
  –í—Å–µ–≥–æ —Ä–∞—É–Ω–¥–æ–≤: 2
  –° RAG: 2
  –ë–µ–∑ RAG: 0
  –í—Å–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤: 2
  –°–æ–∑–¥–∞–Ω–æ: 2026-01-12 14:30:00

–í—ã: /exit

üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏...
üíæ –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞: conversation_history.json (2 —Ä–∞—É–Ω–¥–æ–≤)
–î–æ —Å–≤–∏–¥–∞–Ω–∏—è!
```

## –§–æ—Ä–º–∞—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ

–ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç —Å–µ–∫—Ü–∏—é "–ò—Å—Ç–æ—á–Ω–∏–∫–∏":

```
üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏:

1. [–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: 0.8523]
   –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: chunk_index=42, start_pos=15234, end_pos=17123, source_file=wolf.rtf
   –¢–µ–∫—Å—Ç: –ì–∞—Ä—Ä–∏ –ì–∞–ª–ª–µ—Ä, –∫–æ—Ç–æ—Ä–æ–≥–æ –¥—Ä—É–∑—å—è –Ω–∞–∑—ã–≤–∞–ª–∏ –°—Ç–µ–ø–Ω—ã–º –í–æ–ª–∫–æ–º, –∂–∏–ª –≤ –Ω–µ–±–æ–ª—å—à–æ–π...

2. [–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: 0.7654]
   –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: chunk_index=45, start_pos=17500, end_pos=18234, source_file=wolf.rtf
   –¢–µ–∫—Å—Ç: –ì–∞–ª–ª–µ—Ä—É –±—ã–ª–æ –æ–∫–æ–ª–æ –ø—è—Ç–∏–¥–µ—Å—è—Ç–∏ –ª–µ—Ç, –æ–Ω –≤–µ–ª –æ–¥–∏–Ω–æ–∫—É—é –∂–∏–∑–Ω—å...
```

–ï—Å–ª–∏ RAG –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è (—Ä–µ–∂–∏–º `--no-rag`):
```
üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏: –ù–µ—Ç (–æ—Ç–≤–µ—Ç –±–µ–∑ RAG)
```

## –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –∏—Å—Ç–æ—Ä–∏–∏

–ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ:

```json
{
  "turns": [
    {
      "timestamp": "2026-01-12 14:30:00",
      "question": "–ö–∞–∫ –∑–≤–∞–ª–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è?",
      "answer": "–ì–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è –∑–≤–∞–ª–∏ –ì–∞—Ä—Ä–∏ –ì–∞–ª–ª–µ—Ä...",
      "sources": [
        {
          "text": "–ì–∞—Ä—Ä–∏ –ì–∞–ª–ª–µ—Ä, –∫–æ—Ç–æ—Ä–æ–≥–æ –¥—Ä—É–∑—å—è...",
          "score": 0.8523,
          "metadata": {
            "chunk_index": "42",
            "start_pos": "15234",
            "end_pos": "17123",
            "source_file": "wolf.rtf"
          }
        }
      ],
      "useRag": true
    }
  ],
  "createdAt": "2026-01-12 14:30:00",
  "lastModified": "2026-01-12 14:35:00"
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏
–°–∏—Å—Ç–µ–º–∞ –ø–æ–º–Ω–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã:
- "–ê –≥–¥–µ –æ–Ω –∂–∏–ª?" (—Å–∏—Å—Ç–µ–º–∞ –ø–æ–Ω–∏–º–∞–µ—Ç, –æ –∫–æ–º —Ä–µ—á—å –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
- "–†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ" (–æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ—Ç–≤–µ—Ç)

### 2. –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
–í—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–æ, –æ—Ç–∫—É–¥–∞ –≤–∑—è—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞
- –í–∫–ª—é—á–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–ø–æ–∑–∏—Ü–∏—è –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ, —Ñ–∞–π–ª)
- –ü—Ä–µ–≤—å—é —Ç–µ–∫—Å—Ç–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

### 3. –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å
–ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å:
- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏
- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

### 4. –£–¥–æ–±—Å—Ç–≤–æ
–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –í–µ—Å—Ç–∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –Ω–∞ –ª–µ—Ç—É
- –£–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –≤ LLM

–ö–æ–≥–¥–∞ –µ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏—è, —Å–∏—Å—Ç–µ–º–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:

```
1. –°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å RAG-–∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (–µ—Å–ª–∏ –µ—Å—Ç—å)
2. –í—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
3. –¢–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç LLM –ø–æ–Ω–∏–º–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –∏ –¥–∞–≤–∞—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã.

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

–° –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `--min-score` –º–æ–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
- `0.0-0.5` - –æ—á–µ–Ω—å —Å–≤–æ–±–æ–¥–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- `0.5-0.7` - —É–º–µ—Ä–µ–Ω–Ω–∞—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `0.7-0.9` - —Å—Ç—Ä–æ–≥–∞—è
- `0.9-1.0` - –æ—á–µ–Ω—å —Å—Ç—Ä–æ–≥–∞—è (–ø–æ—á—Ç–∏ —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è)

–ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω —á–∞–Ω–∫ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ—Ä–æ–≥, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º –±–µ–∑ RAG.

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç
./gradlew run --args='chat'

# –ó–∞–¥–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–æ–ø—Ä–æ—Å–æ–≤:
# 1. "–ö—Ç–æ –≥–ª–∞–≤–Ω—ã–π –≥–µ—Ä–æ–π?"
# 2. "–ö–∞–∫–∏–µ —É –Ω–µ–≥–æ –±—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã?"
# 3. "–ö–∞–∫ –æ–Ω –∏—Ö —Ä–µ—à–∏–ª?"
# 4. "/history" - —Å–º–æ—Ç—Ä–∏–º –≤—Å—é —Ü–µ–ø–æ—á–∫—É
# 5. "/exit" - —Å–æ—Ö—Ä–∞–Ω—è–µ–º
```

### –†–∞–±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–µ—Å—Å–∏—è–º–∏

```bash
# –°–µ—Å—Å–∏—è 1: –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã
./gradlew run --args='chat --history-path=general_qa.json'

# –°–µ—Å—Å–∏—è 2: –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
./gradlew run --args='chat --history-path=detailed_analysis.json --min-score=0.8'

# –°–µ—Å—Å–∏—è 3: –ë–µ–∑ RAG (–æ–±—â–∏–µ –∑–Ω–∞–Ω–∏—è)
./gradlew run --args='chat --no-rag --history-path=general_chat.json'
```

### –û–¥–∏–Ω–æ—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã —Å –∏—Å—Ç–æ—Ä–∏–µ–π

```bash
# –ü–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
./gradlew run --args='ask "–û —á–µ–º –∫–Ω–∏–≥–∞?" --save-history'

# –£—Ç–æ—á–Ω–µ–Ω–∏–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç)
./gradlew run --args='ask "–ê –∫—Ç–æ –∞–≤—Ç–æ—Ä?" --save-history'

# –ï—â–µ —É—Ç–æ—á–Ω–µ–Ω–∏–µ
./gradlew run --args='ask "–ö–æ–≥–¥–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞?" --save-history'
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç** –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–¥–∞—á
2. **–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∏—Å—Ç–æ—Ä–∏—é** –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–µ—Å—Å–∏–π
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏** –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏** –≤ –≤—ã–≤–æ–¥–µ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤
5. **–û—á–∏—â–∞–π—Ç–µ –∏—Å—Ç–æ—Ä–∏—é** (`/clear`) –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–µ–º—ã –¥–∏–∞–ª–æ–≥–∞

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ò—Å—Ç–æ—Ä–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª –∏—Å—Ç–æ—Ä–∏–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ JSON –≤–∞–ª–∏–¥–Ω—ã–π
- –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—É—é –∏—Å—Ç–æ—Ä–∏—é, –µ—Å–ª–∏ —Ñ–∞–π–ª –ø–æ–≤—Ä–µ–∂–¥–µ–Ω

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∂–∏–º RAG (–±–µ–∑ `--no-rag`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–Ω–¥–µ–∫—Å –∑–∞–≥—Ä—É–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–∏–∑–∏—Ç—å `--min-score`

### –ö–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è (`--save-history`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ `--history-path`
- –í –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
